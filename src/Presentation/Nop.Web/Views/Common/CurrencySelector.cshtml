@model CurrencySelectorModel
@using Nop.Web.Models.Common;
@if (Model.AvailableCurrencies.Count > 1)
{
    var currencies = Model.AvailableCurrencies.Select(x => new SelectListItem
    {
        Text = x.Name,
        Value = x.Id.ToString(),
        Selected = x.Id.Equals(Model.CurrentCurrency.Id)
    });
    
    @Html.DropDownList("customerCurrency", currencies)
    
    <script type="text/javascript">
        $(document).ready(function () {
            $("#customerCurrency").change(onCurrencyChanged);
        });

        function onCurrencyChanged() {
            var selectedCurrencyId = $("#customerCurrency").val();
            var changeCurrencyActionUrl = '@Url.RouteUrl("ChangeCurrency", new { customercurrency = "currencyplaceholder" })';
            changeCurrencyActionUrl = changeCurrencyActionUrl.replace("currencyplaceholder", selectedCurrencyId);
            setLocation(changeCurrencyActionUrl);
        }
    </script>
}